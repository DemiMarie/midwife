m4_include([./package.m4])
AT_INIT([[Initial tests]])
AT_COPYRIGHT([[Copyright Â© 2014 Demetrios Obenour.
Licensed under the MIT license; see COPYING for its terms.]])

AT_COLOR_TESTS

m4_define([expected_output],[aasdf

d
aa
a])
AT_BANNER([[Initial test group]])
AT_SETUP([[Basic file test]])
cat >script <<EOF
@%:@! ${midwife_bindir=../..}/midwife -n2
;; -*-`which printf`  "%s" "aasdf\\n\\x0ad\\012aa\\na" -*- a
EOF
chmod u+x script
AT_CHECK([./script],[0],m4_defn([expected_output]))
AT_CLEANUP

AT_SETUP([[midwife3 test]])
cat >script <<EOF
@%:@! ${midwife_bindir=../..}/midwife3
;;
;; -*-`which printf`  "%s" "aasdf\\n\\x0ad\\012aa\\na" -*- a
EOF
chmod u+x script
AT_CHECK([./script],[0],m4_defn([expected_output]))
AT_CLEANUP
